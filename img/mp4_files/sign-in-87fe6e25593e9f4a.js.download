(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1312,3699,2380],{2380:function(e,t,n){"use strict";n.r(t),n.d(t,{SignUpContext:function(){return u},default:function(){return l}});var r=n(7294),o=n(6727),s=n(7160),i=n(9096),a=n(5893);const u=r.createContext(null);function l({children:e}){const{AuthState:t}=(0,r.useContext)(s.AuthContext),{checkUserAuthentication:n}=(0,r.useContext)(o.MainContext),[l,c]=(0,r.useReducer)(i.n$,{SelectedPackage:{},SelectedPrice:{},SelectedMethod:{},LoginOperator:{},UserDetails:{Operator:100001},subscribeResponseCode:null,newUser:!1,signupRender:!1,showPtclForm:!0});(0,r.useEffect)((()=>(t?.PaymentPackages?.length>0&&c({type:i.xU,data:t.PaymentPackages[0]}),t?.LoginOperators?.length>0&&c({type:i.pe,data:t.LoginOperators}),t?.sensitive?.mobileNo&&c({type:i.ku,data:{MobileNo:t?.sensitive?.mobileNo}}),t?.authContextLoaded,n(),()=>{})),[t]);const d={dispatch:c,SignUpState:l};return(0,a.jsx)(u.Provider,{value:d,children:e})}},9096:function(e,t,n){"use strict";n.d(t,{E7:function(){return o},Fw:function(){return l},dE:function(){return i},fv:function(){return c},ku:function(){return a},n$:function(){return d},pe:function(){return u},qB:function(){return s},xU:function(){return r}});const r="UPDATE_PACKAGE",o="UPDATE_PAYMENT_PRICE",s="UPDATE_PAYMENT_METHOD",i="UPDATE_SUBSCRIBE_RESPONSE",a="UPDATE_USER_DETAILS",u="LOGIN_OPERATOR",l="LOGGED_IN",c="SHOW_PTCL_FORM";function d(e,t){switch(t.type){case r:return{...e,SelectedPackage:t.data};case"ALREADY_SIGNEDUP_NUM":return{...e,AlreadySignedUpNum:t.data};case o:return{...e,SelectedPrice:t.data};case s:return{...e,SelectedMethod:t.data};case u:return{...e,LoginOperator:t.data};case l:return{...e,LoggedIn:t.data};case c:return{...e,showPtclForm:t.data};case i:return{...e,subscribeResponseCode:t.data.code,newUser:t.data.newUser,token:t.data?.token};case a:return{...e,UserDetails:{...e.UserDetails,...t.data}};case"SIGNUP_RENDER":return{...e,signupRender:t.data}}}},8785:function(e,t,n){"use strict";var r=n(6727),o=n(1163),s=n(7294),i=n(5893);t.Z=e=>t=>{const{initialState:n}=(0,s.useContext)(r.MainContext),a=(0,o.useRouter)();return(0,s.useEffect)((()=>{n?.userCountry?.notAllowedRegion&&a.push("/")}),[n?.userCountry?.notAllowedRegion]),(0,i.jsx)(e,{...t})}},3699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(7294),o=n(7160),s=n(2380),i=n(6727),a=n(8855),u=n(1966),l=n(9512),c=n(2248),d=n.n(c),p=n(9785),g=n(9096),h=n(7703),f=n(1163),m=(n(6656),n(5893));function x({fromView:e}){const t=(0,f.useRouter)(),[n,c]=(0,r.useState)(""),{setLoader:x,initialState:b,setError:C}=r.useContext(i.MainContext),{SignUpState:S,dispatch:N}=r.useContext(s.SignUpContext),{dispatch:P}=r.useContext(o.AuthContext),[U,_]=(0,r.useState)(!1);return(0,r.useEffect)((()=>((async()=>{let e={MobileNo:S.UserDetails.MobileNo,OperatorId:S.UserDetails.Operator};var t=await(0,u.post)(a.sendOTPWithOperator,e);C((0,p.successMessage)(t.data))})(),()=>{})),[]),(0,r.useEffect)((()=>(_(b.isMobile),()=>{})),[b.isMobile]),(0,m.jsxs)("div",{className:d().authForm,"data-testid":"forgetpin-wrapper",children:[(0,m.jsx)("h1",{className:"component-title text-grey","data-testid":"forgetpin-h1",children:"Enter Your OTP"}),(0,m.jsx)("input",{type:"text",maxLength:"6",className:`form-control border-curve ${d().authField}`,placeholder:"Enter OTP",value:n,onChange:e=>function(e,t){const n=(0,h.X1)(e);n.toString().length<=t?c(n):e.preventDefault()}(e,6),pattern:"\\d*",inputMode:"numeric","data-testid":"forgetpin-otp"}),(0,m.jsx)("button",{type:"button",className:`btn pcolor btn-lg ${d().authBtn}`,onClick:async()=>await async function(){x(!0);let r={MobileNo:0+S.UserDetails.MobileNo,otpCode:n};const o=await l.AuthService.verifyOTP(r);null!=o?1==o.responseCode?l.AuthService.clearUserToken(r.MobileNo.substring(1)).then((n=>{"signin"==e?t.push(`/sign-up?code=34&number=${S.UserDetails?.MobileNo}&token=${o.data.jwtToken}`):"signup"==e&&N({type:g.dE,data:{code:34,newUser:!0,token:o.data.jwtToken}}),C((0,p.successMessage)(o))})):C((0,p.errorMessage)(o)):C(p.somethingWentWrong),x(!1)}(),"data-testid":"forgetpin-btn",children:"Verify OTP"})]})}},1767:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(9512),o=n(1163),s=n(6656),i=n(7294),a=n(6727),u=n(2380),l=n(7160),c=n(2275),d=n(1348),p=n(9096),g=n(9785),h=n(8656),f=n(4463),m=n(5893);function x(e,t){return t=>{const{setLoader:n,checkUserAuthentication:x,initialState:b,setError:C}=(0,i.useContext)(a.MainContext),{SignUpState:S,dispatch:N}=(0,i.useContext)(u.SignUpContext),{dispatch:P}=(0,i.useContext)(l.AuthContext),U=(0,o.useRouter)();return(0,m.jsx)(e,{login:async function(e,t=!0){var o;n(!0);const i=s.Cookie.getCookies("UserPin")&&"null"!=s.Cookie.getCookies("UserPin")?s.Cookie.getCookies("UserPin"):S.UserDetails?.UserPin;s.Cookie.getCookies("UserPin")&&s.Cookie.setCookies("UserPin",null);var a={Language:"en",Platform:"web",Version:"V1",MobileNo:S.UserDetails.MobileNo,OperatorId:S.UserDetails.Operator,UserPin:i};return o=await async function(e,t,o){n(!0);var s={};s=o?await r.AuthService.signInOrSignUpMobileOperatorByPin(e,t):await r.AuthService.signInOrSignUpMobileOperator(e,t);window.setUserPin&&s&&((0,f.SetUserPin)({pin:pin.value,userId:s.data.User.UserId,mobileNo:S.UserDetails.MobileNo,name:s.data.UserProfile.UserProfileFullName,ProductName:s.data.UserActiveSubscription[0].PackageName??" "}),window.setUserPin=!1);!async function(e,t){try{var o=(0,c.FO)(e);if(n(!1),1==o.code)!function(){x(),C(g.signInMessage);let e=(0,h.getBackUrl)(),t=e;(!e||e.includes("sign-in")||e.includes("change-package"))&&(t="/");setTimeout((()=>{window.location.href=t}),2e3)}();else if(34==o.code)P({type:d.kR,data:"send-otp"});else if(31==o.code)C(g.enterValidPin);else if(33==o.code)C((0,g.loginMaxLimit)(o.message));else if(401==o.code){const e=await async function(e){let t={Language:"en",MobileNo:e.MobileNo};return await r.AuthService.GetCardUser(t)}(t);!function(e,t){3==e?.data?.User?.IsUpdgradeOrDownGrade?function(){var e={success:()=>P({type:d.kR,data:"send-otp"})};C((0,g.signInLimitErrorPremium)(e)),setTimeout((()=>{(0,h.closeCrossSwalButton)()}))}():function(e,t){var r={success:()=>{n(!0),P({type:d.DS,data:!0}),N({type:p.Fw,data:!0}),P({type:d.xU,data:!0}),setTimeout((()=>{U.push({pathname:"/change-package",query:{MobileNo:t.MobileNo}})}),1e3)},cancel:()=>{P({type:d.kR,data:"send-otp"})}};C((0,g.signInLimitError)(r)),setTimeout((()=>{(0,h.closeCrossSwalButton)(),document.querySelector(".swal-button--cancel").addEventListener("click",(function(){P({type:d.kR,data:"send-otp"})}))}))}(0,t)}(e,t)}else if(0==o.code||4==o.code){var s={success:()=>{"PK"===b?.userCountry?.ShortName?U.push("/sign-up?tab=2&packageId=4"):U.push("/psl7")}};C((0,g.notASubscribeUser)(s))}}catch(i){return console.log(i),o}}(s,e)}(a,e,t),o},...t})}}},2891:function(e,t,n){"use strict";n(7294);var r=n(845),o=n.n(r),s=n(5893);t.Z=({radio:e,activeRadio:t,setRadio:n,image:r,name:i})=>(0,s.jsx)("div",{"data-testid":"login_radiobtn",className:`${o().pkprbt} ${e===t?o().pkprba:""}`,role:"button",tabIndex:0,onClick:()=>e!==t?n(t):null,children:(0,s.jsx)("img",{src:r,alt:i,"data-testid":"radio_image"})})},9098:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return j},default:function(){return E}});var r=n(7294),o=n(3699),s=n(1163),i=n(2380),a=n(9096),u=n(6727),l=n(6656),c=n(9512),d=n(1767),p=n(2248),g=n.n(p),h=n(9785),f=n(7160),m=n(1348),x=n(7703),b=n(5893);var C=(0,d.Z)((function({login:e,ip:t}){const n=(0,s.useRouter)(),[o,d]=(0,r.useState)(""),[p,C]=(0,r.useState)(""),[S,N]=(0,r.useState)(!1),[P,U]=(0,r.useState)(""),[_,y]=(0,r.useState)(!1),{setLoader:v,setError:w,initialState:k}=(0,r.useContext)(u.MainContext),{SignUpState:M,dispatch:j}=(0,r.useContext)(i.SignUpContext),{dispatch:E}=(0,r.useContext)(f.AuthContext),[A,O]=(0,r.useState)(0);return(0,r.useEffect)((()=>{if(M?.UserDetails?.MobileNo){let e={Language:"en",MobileNo:M.UserDetails.MobileNo};c.AuthService.GetCardUser(e).then((e=>{y(!e?.data?.User?.IsProfileNameSet),O(e.data.User.UserId)})).catch((e=>console.log(e)))}return N(k.isMobile),()=>{}}),[k.isMobile]),(0,b.jsxs)("div",{className:g().authForm,children:[(0,b.jsx)("style",{jsx:!0,children:"\n          .form-group {\n            text-align: left;\n          }\n\n          .form-group label {\n            color: #999;\n            margin-bottom: 0.25rem;\n          }\n          .form-group + .form-group {\n            margin-top: 1rem;\n          }\n          .form-group + .btn {\n            margin-top: 1.5rem;\n          }\n        "}),(0,b.jsx)("h1",{children:"Reset your PIN"}),_?(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{for:"fullName",children:"Enter your Full Name"}),(0,b.jsx)("input",{type:"text",className:`form-control ${g().authField}`,placeholder:"Please enter full name",name:"pin",maxLength:"20",onChange:function(e){U(e.target.value)},id:"fullName"})]}):null,(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{for:"password",children:"Enter your new PIN"}),(0,b.jsx)("input",{type:"password",className:`form-control ${g().authField}`,minLength:"4",maxLength:"4",value:o,placeholder:"Please set passcode as a 4 digit PIN",name:"pin",onChange:function(e){const t=(0,x.X1)(e);+t===+t&&d(t.trim())},id:"password"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{for:"confirmPassword",children:"Confirm your PIN"}),(0,b.jsx)("input",{type:"password",className:`form-control ${g().authField}`,minLength:"4",maxLength:"4",placeholder:"Confirm your PIN",name:"pin",value:p,onChange:function(e){const t=e.target.value;+t===+t&&C(t.trim())},id:"confirmPassword"})]}),(0,b.jsx)("button",{className:`btn pcolor btn-lg ${g().authBtn}`,onClick:async function(){if(_&&P.trim().length<1)return void w(h.fullNameError);if(!o)return void w(h.enterPinError);if(o!=p)return void w(h.pinMatchError);v(!0);const e=await c.AuthService.setUserPin(o,P,void 0,A,M.UserDetails.MobileNo);if(1==e.responseCode){await c.AuthService.clearUserToken(M.UserDetails.MobileNo),j({type:a.ku,data:{UserPin:o}});var t={message:e.message,success:()=>{n.push(`sign-in?number=${M.UserDetails.MobileNo}`),E({type:m.kR,data:"sign-in"})},cancel:()=>{n.push(`sign-in?number=${M.UserDetails.MobileNo}`),E({type:m.kR,data:"sign-in"})}};w((0,h.setUserPinMessage)(t))}else 2==e.responseCode?(v(!1),w((0,h.errorMessage)(e))):(w(h.somethingWentWrong),l.Cookie.setCookies("isAuth",0),v(!1));v(!1)},children:"Save"})]})})),S=n(9035),N=n.n(S),P=n(2891),U=n(1664),_=n.n(U),y=n(9008),v=n.n(y);var w=(0,d.Z)((({login:e,forgetPin:t,ip:n})=>{const{AuthState:o}=(0,r.useContext)(f.AuthContext),{SignUpState:l,dispatch:d}=(0,r.useContext)(i.SignUpContext),[p,m]=(0,r.useState)(o.LoginOperators[0]?.OperatorId??0),{setLoader:C,initialState:S,setError:U}=(0,r.useContext)(u.MainContext),[y,w]=(0,r.useState)(!0),k=(0,s.useRouter)(),[M,j]=(0,r.useState)(""),[E,A]=(0,r.useState)(""),[O,R]=(0,r.useState)(!1);(0,r.useEffect)((()=>{k?.query?.number&&j(k?.query?.number)}),[k?.query?.number]),(0,r.useEffect)((()=>{m(o?.LoginOperators[0]?.OperatorId)}),[o]),(0,r.useEffect)((()=>{l.UserDetails?.MobileNo&&l.UserDetails?.UserPin&&(O&&e(n)&&R(!1),w(!0))}),[l.UserDetails?.MobileNo,O]),(0,r.useEffect)((()=>(10===M.length&&4===E.length?w(!1):y||w(!0),()=>{})),[M,E]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v(),{children:(0,b.jsx)("style",{children:"\n            footer.footer {\n              display: none;\n            }\n          "})}),(0,b.jsxs)("form",{onSubmit:e=>(e=>{if(e.preventDefault(),w(!0),C(!0),"+92"==o.CountryCode&&!p)return C(!1),void U(h.operatorError);M.length>6&&M.length<20&&4==E.length?(C(!0),d({type:a.ku,data:{MobileNo:M,Operator:p,UserPin:E}}),R(!0)):(U(h.signInFieldsError),C(!1)),C(!1)})(e),className:N().logbox,children:[(0,b.jsx)("h1",{className:"h2",children:"Select your network"}),(0,b.jsx)("div",{className:`${N().loginPayments} mt-4`,children:o.LoginOperators.map(((e,t)=>(0,b.jsx)(P.Z,{radio:p,activeRadio:e.OperatorId,setRadio:m,image:e.OperatorImage,name:e.OperatorName},t)))}),(0,b.jsxs)("div",{className:`${N().loginFields} mt-5`,children:[S?.userCountry?.CountryCode?(0,b.jsx)("input",{className:`form-control ${N().universalNo} ${g().authField}`,disabled:!0,value:`+${S?.userCountry.CountryCode}`}):null,(0,b.jsx)("input",{className:`form-control ${g().authField}`,placeholder:"3xxxxxxxxxx",value:M,onChange:e=>function(e){const t="+92"===o.CountryCode?10:20,n=(0,x.X1)(e);n.toString().length<=t&&j(n)}(e),type:"text",pattern:"\\d*",inputMode:"numeric","data-testid":"inp_test"}),(0,b.jsx)("input",{className:`form-control ${N().fieldBreakRow} ${g().authField}`,type:"password",placeholder:"Enter your pin",maxLength:4,value:E,onChange:e=>function(e){(0,x.X1)(e,A)}(e),"data-testid":"inppwd_test"}),(0,b.jsxs)("p",{className:N().loginParagraph,children:[(0,b.jsx)(_(),{href:"/sign-up",passHref:!0,children:(0,b.jsx)("a",{"data-testid":"test-href",children:"Not a Subscriber?"})}),(0,b.jsx)("span",{children:"|"}),(0,b.jsx)("span",{className:"mr-2 text-grey font-14",onClick:()=>{if("+92"==o.CountryCode){if(10!=M?.trim().length)return void U(h.validMobileNumber);d({type:a.ku,data:{MobileNo:M,Operator:p}}),c.AuthService.GetCardUser({MobileNo:M,Language:"en"}).then((e=>{if(!e.data.User.IsSubscribe){var n={success:()=>{"PK"===S?.userCountry?.ShortName?k.push("/sign-up?tab=2&packageId=4"):k.push("/psl7")}};return U((0,h.notASubscribeUser)(n)),0}t(l)}))}else{if(!M?.length)return void U(h.validMobileNumber);t(l)}},style:{cursor:"pointer"},"data-testid":"frgt_pin",children:o&&o.LoginOperators.length?"Forgot PIN?":"Reset Passcode"})]})]}),(0,b.jsx)("button",{type:"submit",className:`btn btn-lg pcolor mt-5 ${g().authBtn}`,disabled:y,children:"Login"})]})]})}));var k=(0,n(8785).Z)((e=>{const t=(0,s.useRouter)(),{setLoader:n,initialState:i,setError:a}=(0,r.useContext)(u.MainContext),{AuthState:l,dispatch:d}=(0,r.useContext)(f.AuthContext),[p,x]=(0,r.useState)("");async function S(e){n(!0),"PK"!==i?.userCountry?.ShortName?c.AuthService.forgetPin(e.UserDetails.MobileNo,e.UserDetails.Operator).then((e=>{n(!1),a(1==e.responseCode?(0,h.successMessage)(e):(0,h.errorMessage)(e))})).catch((e=>n(!1))):(n(!1),d({type:m.kR,data:"forget-pin"}))}const N=(0,r.useCallback)((()=>"enter-pin"==l.ViewToShow?(0,b.jsx)(EnhancedEnterPin,{forgetPin:S}):"forget-pin"==l.ViewToShow?"PK"==i?.userCountry?.ShortName?(0,b.jsx)(o.default,{fromView:"signin"}):(0,b.jsx)(w,{forgetPin:S,ip:e.ip}):"set-pin"==l.ViewToShow?(0,b.jsx)(C,{}):"sign-in"==l.ViewToShow?(0,b.jsx)(w,{forgetPin:S,ip:e.ip}):"send-otp"==l.ViewToShow?(0,b.jsx)(o.default,{fromView:"signin"}):void 0),[l.ViewToShow,i.userCountry]);return(0,r.useEffect)((()=>{const e=i?.userCountry?.ShortName;return e&&"PK"!=e&&x(g().bgintl),()=>{d({type:m.kR,data:"sign-in"})}}),[i.userCountry,t]),(0,b.jsxs)("section",{className:`${g().authbg} ${p}`,children:[(0,b.jsx)(v(),{children:(0,b.jsx)("style",{children:"\n            footer.footer {\n              margin-top: 0;\n            }\n            .swal-title {\n              line-height: 1.2\n            }\n          "})}),(0,b.jsx)(N,{})]})})),M=n(8656),j=!0;function E(e){const{AuthState:t}=(0,r.useContext)(f.AuthContext);return(0,r.useEffect)((()=>{t.sensitive&&(0,M.isAuthentictedUser)()&&s.router.push("/")}),[t.sensitive]),(0,b.jsxs)("div",{children:[(0,b.jsxs)(v(),{children:[(0,b.jsx)("title",{children:"Sign in"}),(0,b.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,b.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,b.jsx)("link",{rel:"canonical",href:"https://wwww.tapmad.com/sign-in"})]}),(0,b.jsx)(k,{...e})]})}},7703:function(e,t,n){"use strict";n.d(t,{Je:function(){return s},X1:function(){return r},YZ:function(){return o}});const r=(e,t=null,n=null)=>{const r=e.target.value.replace(/\D/g,"").trim();return t&&t(r),n&&n(r),r},o=(e,t,n)=>(r(e,t),n(e));function s(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}},6069:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-in",function(){return n(9098)}])},2248:function(e){e.exports={authbg:"authenticationForms_authbg__tZndf",footer:"authenticationForms_footer__iFoN_",bgintl:"authenticationForms_bgintl__IaSMM",authFormWrap:"authenticationForms_authFormWrap__Egeq_",authForm:"authenticationForms_authForm__3xJ7j",authField:"authenticationForms_authField__AMNr_",authBtn:"authenticationForms_authBtn__DbWuZ"}},9035:function(e){e.exports={logbox:"loginPage_logbox__TSZju",loginFields:"loginPage_loginFields___qw25",universalNo:"loginPage_universalNo__p_sga",fieldBreakRow:"loginPage_fieldBreakRow__GVC0D",loginParagraph:"loginPage_loginParagraph__7nKY4"}},845:function(e){e.exports={pkprbt:"paymentRadioButton_pkprbt__HWgXE",pkprba:"paymentRadioButton_pkprba__dkpl4"}}},function(e){e.O(0,[7160,9774,2888,179],(function(){return t=6069,e(e.s=t);var t}));var t=e.O();_N_E=t}]);